<div class="modal-backdrop" (click)="cerrarModal()"></div>

<div class="modal">
  <div class="header">
    <h2>ðŸ›’ Carrito</h2>
    <button class="btn close" (click)="cerrarModal()">Ã—</button>
  </div>

  <div class="list" *ngIf="productos.length; else vacio">
    <div class="item" *ngFor="let item of productos">
      <img [src]="item.image" [alt]="item.title" />
      <div class="meta">
        <h4>{{ item.title }}</h4>
        <p class="price">$ {{ item.price }}</p>
        <div class="controls">
          <label>Cantidad:</label>
          <input
            type="number"
            min="1"
            [(ngModel)]="item.cantidad"
            (change)="actualizar(item)"
          />
          <button class="btn danger" (click)="eliminar(item.id)">Eliminar</button>
        </div>
        <p class="subtotal">Subtotal: $ {{ (item.price * (item.cantidad ?? 1)).toFixed(2) }}</p>
      </div>
    </div>
  </div>

  <ng-template #vacio>
    <p class="empty">Tu carrito estÃ¡ vacÃ­o.</p>
  </ng-template>

  <div class="footer">
    <h3>Total: $ {{ total.toFixed(2) }}</h3>
    <button class="btn outline" (click)="cerrarModal()">Cancelar</button>
    <button class="btn primary" (click)="pagar()">Pagar</button>
  </div>
</div>